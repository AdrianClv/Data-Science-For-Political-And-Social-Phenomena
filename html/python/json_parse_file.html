
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Parse-JSON-File">Parse JSON File<a class="anchor-link" href="#Parse-JSON-File">&#182;</a></h1><ul>
<li><strong>Author:</strong> <a href="http://www.chrisalbon.com/">Chris Albon</a>, <a href="https://twitter.com/chrisalbon">@ChrisAlbon</a></li>
<li><strong>Date:</strong> -</li>
<li><strong>Repo:</strong> <a href="https://github.com/chrisalbon/code_py">Python 3 code snippets for data science</a></li>
<li><strong>Note:</strong></li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Preliminaries">Preliminaries<a class="anchor-link" href="#Preliminaries">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[31]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">requests</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Get-data">Get data<a class="anchor-link" href="#Get-data">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[78]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># Pull down some simple json data</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;http://api.zippopotam.us/us/ma/belmont&#39;</span><span class="p">)</span>

<span class="c"># Convert it into a python object</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[79]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># View the data</span>
<span class="n">data</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[79]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>{&apos;state abbreviation&apos;: &apos;MA&apos;,
 &apos;place name&apos;: &apos;Belmont&apos;,
 &apos;country abbreviation&apos;: &apos;US&apos;,
 &apos;state&apos;: &apos;Massachusetts&apos;,
 &apos;places&apos;: [{&apos;longitude&apos;: &apos;-71.4594&apos;,
   &apos;latitude&apos;: &apos;42.4464&apos;,
   &apos;place name&apos;: &apos;Belmont&apos;,
   &apos;post code&apos;: &apos;02178&apos;},
  {&apos;longitude&apos;: &apos;-71.2044&apos;,
   &apos;latitude&apos;: &apos;42.4128&apos;,
   &apos;place name&apos;: &apos;Belmont&apos;,
   &apos;post code&apos;: &apos;02478&apos;}],
 &apos;country&apos;: &apos;United States&apos;}</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Parse-data">Parse data<a class="anchor-link" href="#Parse-data">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[80]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># One level deep</span>
<span class="n">data</span><span class="p">[</span><span class="s">&#39;places&#39;</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[80]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>[{&apos;longitude&apos;: &apos;-71.4594&apos;,
  &apos;latitude&apos;: &apos;42.4464&apos;,
  &apos;place name&apos;: &apos;Belmont&apos;,
  &apos;post code&apos;: &apos;02178&apos;},
 {&apos;longitude&apos;: &apos;-71.2044&apos;,
  &apos;latitude&apos;: &apos;42.4128&apos;,
  &apos;place name&apos;: &apos;Belmont&apos;,
  &apos;post code&apos;: &apos;02478&apos;}]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[81]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># One level deep, second element</span>
<span class="n">data</span><span class="p">[</span><span class="s">&#39;places&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[81]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>{&apos;longitude&apos;: &apos;-71.2044&apos;,
 &apos;latitude&apos;: &apos;42.4128&apos;,
 &apos;place name&apos;: &apos;Belmont&apos;,
 &apos;post code&apos;: &apos;02478&apos;}</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[82]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># One level down, then second item, then it&#39;s longitude object</span>
<span class="n">data</span><span class="p">[</span><span class="s">&#39;places&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="s">&#39;longitude&#39;</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[82]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>&apos;-71.2044&apos;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Create-a-for-loop-to-extract-all-lat/long-coordinates">Create a for loop to extract all lat/long coordinates<a class="anchor-link" href="#Create-a-for-loop-to-extract-all-lat/long-coordinates">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[130]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># For each element, i, in data.places,</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;places&#39;</span><span class="p">]:</span>
    <span class="c"># print the latitude element and the longitude element</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="s">&#39;latitude&#39;</span><span class="p">],</span> <span class="n">i</span><span class="p">[</span><span class="s">&#39;longitude&#39;</span><span class="p">])</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>42.4464 -71.4594
42.4128 -71.2044
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Same-as-above,-but-as-a-function">Same as above, but as a function<a class="anchor-link" href="#Same-as-above,-but-as-a-function">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[139]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># Create a function that</span>
<span class="k">def</span> <span class="nf">extract_latlong</span><span class="p">(</span><span class="n">json</span><span class="p">):</span>
    <span class="c"># For each element, i, in data.places,</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s">&#39;places&#39;</span><span class="p">]:</span>
        <span class="c"># print the latitude element and the longitude element</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="s">&#39;latitude&#39;</span><span class="p">],</span> <span class="n">i</span><span class="p">[</span><span class="s">&#39;longitude&#39;</span><span class="p">])</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[144]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># Run the function</span>
<span class="n">extract_latlong</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>42.4464 -71.4594
42.4128 -71.2044
</pre>
</div>
</div>

</div>
</div>

</div>